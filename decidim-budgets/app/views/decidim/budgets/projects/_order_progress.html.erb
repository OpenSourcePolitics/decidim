<div id="order-progress">
  <% unless component_settings.vote_per_project? %>
    <span class="mini-title"><%= t(".total_budget") %>
      <strong class="mini-title__strong mini-title__strong--highlight">
        <%= budget_to_currency(component_settings.total_budget) %>
      </strong>
    </span>
  <% end %>

  <div class="budget-summary__progressbox"
       data-current-budget="<%= current_order ? current_order.total_budget : 0 %>"
       data-current-projects="<%= current_order ? current_order.total_projects : 0 %>">
    <div class="progress budget-progress" role="progressbar" tabindex="0"
         aria-valuenow="<%= current_order_percent %>"
         aria-valuemin="<%= component_settings.vote_threshold_percent %>"
         aria-valuetext="<%= current_order_percent %>%"
         aria-valuemax="100">
      <div class="progress-meter progress-meter--minimum" style="width: <%= current_order_percent_minimum %>%">
      </div>
      <!--Change width and text dynamically.-->
      <div class="progress-meter budget-progress__meter <%= progress_meter_state %>"
           style="width: <%= current_order_percent %>%">
        <p class="progress-meter-text progress-meter-text--right">
          <%= current_order_percent %>%
        </p>
      </div>
    </div>
    <% unless current_order_checked_out? %>
      <button class="button small button--sc"
              data-toggle="budget-confirm"
              <%= vote_button_disabled? %>>
        <%= t(".vote") %>
      </button>
    <% end %>
  </div>
  <div class="progressbox-fixed-wrapper"
       data-progressbox-fixed>
    <div class="budget-summary__progressbox budget-summary__progressbox--fixed">
      <div class="progress budget-progress budget-progress--fixed"
           role="progressbar"
           tabindex="0"
           aria-valuenow="<%= current_order_percent %>"
           aria-valuemin="<%= component_settings.vote_threshold_percent %>"
           aria-valuetext="<%= current_order_percent %>%"
           aria-valuemax="100">
        <div class="progress-meter progress-meter--minimum" style="width: <%= current_order_percent %>%"></div>
        <div class="progress-meter budget-progress__meter <%= progress_meter_state %>" style="width: <%= current_order_percent %>%">
          <p class="progress-meter-text progress-meter-text--right">
            <%= current_order_percent %>%
          </p>
        </div>
      </div>
      <% unless current_order_checked_out? %>
        <button class="button small button--sc"
                data-toggle="budget-confirm"
                <%= vote_button_disabled? %>>
          <%= t(".vote") %>
        </button>
      <% end %>
    </div>
  </div>

  <% unless component_settings.vote_per_project? %>
    <span class="mini-title"><%= t(".assigned") %>
      <strong class="mini-title__strong mini-title__strong--highlight">
        <%= budget_to_currency(current_order_assigned_budget) %>
      </strong>
    </span>
  <% end %>
</div>
